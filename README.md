# 회원가입 / 로그인 기능을 포함한 식당 주문 백엔드 서버 만들기


## 기술 스택:

- **Express.js**
- **MySQL**
- **Prisma**

## 라이브러리:
- **Bcrypt.js** : 비밀번호 해싱 및 암호화
- **JWT** : JSON Web Tokens, 사용자 인증 및 권한 부여
- **Cookie-parser** : 쿠키 파싱 및 처리
- **Yarn** : 패키지 의존성 관리

## 기타:
- **Access Token 및 Refresh Token** : 사용자 인증 및 토큰 기반 인증
---
### ERD

![캡처](https://github.com/LetyPark/lv4_private/assets/141550557/cc365850-dcc2-4b4c-8d12-ab96eb28bc09)

---

## 요구사항

**1. 회원가입 API (소비자/사장님)**

    (1) 사용자명, 비밀번호, 사용자 타입을 **request**에서 전달받기
    (2) 닉네임은 `최소 3자 이상, 15자 이하, 알파벳 대소문자(a~z, A~Z), 숫자(0~9)`로 구성하기
    (3) 비밀번호는 `최소 8자 이상, 20자 이하, 닉네임과 같은 값이 포함된 경우 회원가입에 실패`로 구성하기
    (4) 이미 가입된 닉네임을 전달한 경우, "중복된 닉네임입니다." 메시지 반환하기
    (5) **사용자 타입**은 **소비자(`CUSTOMER`)**와 **사장님(`OWNER`)** 타입이 존재합니다.
    (6) 회원가입 시 기본 타입은 **소비자(`CUSTOMER`)**입니다.

**2. 로그인 API (소비자/사장님)**

    (1) 사용자명, 비밀번호를 **request**에서 전달받기
    (2)  일치하지 않는 정보로 로그인 API를 호출시, “닉네임 또는 패스워드를 확인해주세요.” 메시지 반환하기
    (3)  로그인 성공 시, 사용자의 정보를 JWT로 인코딩하고, **Bearer 타입의 Cookie**로 클라이언트에게 전달하기

**3. 카테고리 등록 API**

    (1) 카테고리 이름을 **request**에서 전달받기
    (2) 새롭게 등록된 카테고리는 **가장 마지막 순서**로 설정됩니다.
    (3) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 카테고리 등록 가능

**4. 카테고리 조회 API**

    (1) 등록된 모든 카테고리의 카테고리 이름, 순서를 조회하기
    (2) 조회된 카테고리는 지정된 순서대로 정렬됩니다.

**5. 카테고리 수정 API**

    (1) 카테고리 이름, 순서를 **request**에서 전달받기
    (2) 선택한 카테고리가 존재하지 않을 경우, “존재하지 않는 카테고리입니다." 메시지 반환하기
    (3) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 카테고리 수정 가능

**6. 카테고리 삭제 API**

    (1) 선택한 카테고리 삭제하기
    (2) 카테고리 삭제 시, 해당 카테고리에 **연관된 모든 메뉴도 함께 삭제**됩니다.
    (3) 선택한 카테고리가 존재하지 않을 경우, “존재하지 않는 카테고리입니다." 메시지 반환하기
    (4) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 카테고리 삭제 가능

**7. 메뉴 등록 API**

    (1) 메뉴 이름, 설명, 이미지, 가격을 **request**에서 전달받기
    (2) 새롭게 등록된 메뉴는 **가장 마지막 순서**로 설정됩니다.
    (3) 메뉴는 두 가지 상태, **판매 중(`FOR_SALE`)및 매진(`SOLD_OUT`)** 을 가질 수 있습니다.
    (4) 메뉴 등록 시 기본 상태는 **판매 중(`FOR_SALE`)** 입니다.
    (5) 가격이 0원 이하일 경우, “메뉴 가격은 0보다 작을 수 없습니다.” 메시지 반환하기
    (6) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 메뉴 등록 가능

**8. 카테고리별 메뉴 조회 API**

    (1) 선택한 카테고리의 메뉴 이름, 이미지, 가격, 순서, 판매 상태 조회하기
    (2) 조회된 메뉴는 지정된 순서에 따라 정렬됩니다.

**9. 메뉴 상세 조회 API**

    (1) 선택한 카테고리의 메뉴 이름, 설명, 이미지, 가격, 순서, 판매 상태 조회하기

**10. 메뉴 수정 API**

    (1) 메뉴 이름, 설명, 이미지, 가격, 순서, 판매 상태를 **request**에서 전달받기
    (2) 가격이 0원 이하일 경우, “메뉴 가격은 0보다 작을 수 없습니다.” 메시지 반환하기
    (3) 선택한 메뉴가 존재하지 않을 경우, “존재하지 않는 메뉴입니다." 메시지 반환하기
    (4) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 메뉴 수정 가능

**11. 메뉴 삭제 API**

    (1) 선택한 메뉴 삭제하기
    (2) 선택한 메뉴가 존재하지 않을 경우, “존재하지 않는 메뉴입니다." 메시지 반환하기
    (3) 로그인 토큰을 검사하여, **사장님(OWNER)** 토큰일 경우에만 메뉴 삭제 가능

---

### 커밋 메세지 형식

| Tag                | Description                                                                             |
| ------------------ | --------------------------------------------------------------------------------------- |
| [FEAT]             | 기능 개발 및 기능 추가                                                                  |
| [FIX]              | 버그 수정                                                                               |
| [DESIGN]           | UI 디자인 변경                                                                          |
| [!BREAKING CHANGE] | 커다란 API 변경의 경우(URI 주소 외 Request, Response 가 변경되는 경우)                  |
| [!HOTFIX]          | 급하게 치명적인 버그를 고쳐야하는 경우                                                  |
| [STYLE]            | 코드 포맷 변경, 세미 콜론 누락, 코드 수정이 없는 경우                                   |
| [REFACTOR]         | 코드 리팩토링                                                                           |
| [TEST]             | 테스트 코드, 리펙토링 테스트 코드 추가, Production Code(실제로 사용하는 코드) 변경 없음 |
| [MERGE]            | 병합                                                                                    |
| [CONFLICT]         | 병합 시 충돌 해결                                                                       |
| [DEPLOY]           | 배포 관련 커밋                                                                          |
| [REMOVE]           | 파일을 삭제하는 작업만 수행한 경우                                                      |
| [RENAME]           | 파일 혹은 폴더명을 수정하거나 옮기는 작업만인 경우                                      |
